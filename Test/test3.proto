syntax = "proto3";
package pb;
option go_package = "./;xmsg";
import "common.proto";
import "ds_common.proto";
import "cs_mpdeposit.proto";


message ActivityAward
{
    PropInfo prop = 1;
    bool received = 2; // å·²é¢†å–
    int32 mode_config = 3; // å¥–åŠ±å¯ä»¥åœ¨ä»€ä¹ˆæ¨¡å¼ä¸­ä½¿ç”¨ï¼ˆä»…å±•ç¤ºç”¨ï¼‰ï¼Œ0:å…¨æ¨¡å¼,1:sol,2:mp
}

message ActivityMilestoneAward
{
    uint64 currency_num = 1; // éœ€è¦çš„è´§å¸æ•°é‡
    repeated ActivityAward prop = 2;

    // TODO ä¸ºäº†è®©æ‰€æœ‰ä¸œè¥¿æ›´å¥½åœ°éšé…ç½®è¡¨åˆ·æ–°ï¼Œåº”è¯¥ä½¿ç”¨reward_idæ¥ä»£æ›¿currency_numä½œä¸ºåˆ¤ç­‰æ›´æ–°çš„å‚è€ƒæ¡ä»¶ 
    // int64 reward_id = 3; // é…ç½®è¡¨é‡Œçš„å¥–åŠ±é¡¹id
}

// å…‘æ¢ç‰©å“
message ActivityExchangeProp
{
    uint64 exchange_id    = 1; // âœ…
    int32 exchanged_count = 4; // âœ…å·²å…‘æ¢æ¬¡æ•°

    uint64      currency_num      = 2; // ğŸˆ²éœ€è¦çš„è´§å¸æ•°é‡
    PropInfo    prop              = 3; // ğŸˆ²å…‘æ¢çš„ç‰©å“
    int32       exchange_count_max = 5; // ğŸˆ²æœ€å¤§å…‘æ¢æ¬¡æ•°
}

// ç­¾åˆ°ç±»æ´»åŠ¨
message AttendState
{
    uint32 day      = 1; // ç­¾åˆ°å¤©DayNumber
    uint32 state    = 2; // 0:æœªç­¾åˆ°ï¼Œ1:å·²ç­¾åˆ°ï¼Œ2:å·²é¢†å¥–
}
message AttendInfo
{
    uint32   attend_times              = 1;  // âœ…ç­¾åˆ°æ¬¡æ•° (TODO ç†è®ºä¸Šç”¨len(states)å¯ä»¥ä»£æ›¿)
    int64    first_attend_time         = 2;  // âœ…é¦–æ¬¡ç­¾åˆ°æ—¶é—´
    int64    last_attend_time          = 3;  // âœ…æœ€è¿‘ä¸€æ¬¡ç­¾åˆ°æ—¶é—´
    int64    next_attend_time          = 4;  // ğŸˆ²ä¸‹æ¬¡å¯ç­¾åˆ°æ—¶é—´æˆ³ï¼ˆå¦‚æœç›®å‰å¯ç­¾åˆ°ï¼Œåˆ™æ­¤å¤„ä¸º0)
    repeated AttendState    states      = 5; // âœ…ä½¿ç”¨è¿™ä¸ªä»£æ›¿map

    // éå­˜å‚¨å±æ€§
    repeated ActivityAward  daily_award = 10;  // ğŸˆ²æ¯æ—¥ç¤¼ç‰©
}

//---------------------------- æ´»åŠ¨ç±»å‹ -----------------------------//
/*
    æ¯æ—¥ï¼š2
    ç­¾åˆ°ç±»ï¼š30, 42
    å…‘æ¢ç±»ï¼š11, 44
    é‡Œç¨‹ç¢‘ï¼š12, 40, 43
    ä¸å¸¸ç”¨ï¼š5, 13
*/
// æŒ‰é€»è¾‘ç›¸å…³æ€§é‡æ–°ç»„ç»‡ä¸‹
enum ActivityType
{
    ActivityTypeUnknown         = 0;  // æœªçŸ¥
    ActivityTypeDaily           = 2;  // æ¯æ—¥ä»»åŠ¡
    ActivityTypeAnnouncement    = 5;  // å…¬å‘Š
    ActivityTypeExchangeTask    = 11; // éçº¯å…‘æ¢æ´»åŠ¨ï¼ˆåšä»»åŠ¡è·å–æ´»åŠ¨ä»£å¸ï¼Œç„¶åå†æ‹¿ä»£å¸æ¥å…‘æ¢ï¼‰
    ActivityTypeMilestoneTask   = 12; // é‡Œç¨‹ç¢‘
    ActivityTypeMainpage        = 13; // é¦–é¡µå¤§å±
    ActivityTypeAttend          = 30; // ç­¾åˆ°ç±»
    ActivityTypeRecruitGrowthMilestone  = 40 [deprecated=true]; // æˆé•¿é‡Œç¨‹ç¢‘ï¼ˆå®¢æˆ·ç«¯å·²åˆ é™¤é€»è¾‘ï¼Œä¸ `12` ç›¸æ¯”åªæ˜¯å¯åŠ¨æ—¶é—´ä¸åŒï¼‰
    ActivityTypeRecruitTraining         = 41; // æ–°å…µè¥ç‰¹è®­
    ActivityTypeRecruitAttend           = 42; // æ–°å…µæŠ¥åˆ°
    ActivityTypeRecruitNewMilestone     = 43; // æ–°é‡Œç¨‹ç¢‘å½¢æ€ï¼ˆ7å¤©å„ç§ä»»åŠ¡å…¨æ˜¾ç¤ºï¼Œæ— å¯åšä»»åŠ¡æ•°é‡é™åˆ¶ï¼‰
    ActivityTypeExchangeOnly            = 44; // çº¯å…‘æ¢ç±»æ´»åŠ¨ï¼ˆæ²¡æœ‰ä»»åŠ¡ï¼Œåªå…‘æ¢ï¼Œå…‘æ¢æ‰€éœ€ç‰©å“æ¥è‡ªå…¶ä»–æ´»åŠ¨çš„è—å“å¥–åŠ±ï¼‰
    ActivityTypeExchangeTaskV2  = 45; // éçº¯å…‘æ¢æ´»åŠ¨ï¼ˆåœ¨ `11` åŸºç¡€ä¸Šè§†è§‰æ”¹ç‰ˆï¼Œåå°é€»è¾‘ä¸€è‡´ï¼‰
    ActivityTypeMilestoneTaskV2 = 46; // é‡Œç¨‹ç¢‘ï¼ˆåœ¨ `12` åŸºç¡€ä¸Šè§†è§‰æ”¹ç‰ˆï¼Œåå°é€»è¾‘ä¸€è‡´ï¼‰
}

// ä»»åŠ¡çŠ¶æ€
enum ActivityTaskState
{
    ActivityTaskStateLocked     = 0;  // æœªè§£é”
    ActivityTaskStateUnaccepted = 1;  // æœªæ¥å—
    ActivityTaskStateAccepted   = 2;  // å·²ç»æ¥å—
    ActivityTaskStateCompleted  = 3;  // å·²ç»è¾¾æˆæ‰€æœ‰å¿…é¡»ç›®æ ‡ï¼Œæ²¡æœ‰é¢†å–å¥–åŠ±
    ActivityTaskStateRewarded   = 4;  // å·²ç»é¢†å–å¥–åŠ±
}

// æ´»åŠ¨ä»»åŠ¡ç›®æ ‡
message ActivityObjective
{
    uint64 id           = 1; // âœ…ä»»åŠ¡ç›®æ ‡id
    bool  completed     = 2; // âœ…ä»»åŠ¡ç›®æ ‡æ˜¯å¦å®Œæˆ (TODO ç°åœ¨ä¸€æ—¦å®Œæˆåå°±ä¸éšé…ç½®è¡¨èµ°äº†)
    int64 progress      = 3; // âœ…è¿›åº¦å½“å‰å€¼
    int64 progress_max  = 4; // ğŸˆ²è¿›åº¦æœ€å¤§å€¼

    // ç›®æ ‡å®Œæˆçš„é™åˆ¶æ¡ä»¶
    ActivityObjectiveConditions conditions = 5 [deprecated=true]; // (TODO ç¡®å®šä¸‹è¿™ä¸ªæ˜¯å¦æœ‰ä½¿ç”¨ï¼Œç›®å‰çœ‹æ²¡æœ‰ä½¿ç”¨)
    repeated uint32 window = 6; // æœ€è¿‘åœºæ¬¡å®ŒæˆæŒ‡å®šåˆåŒidçš„è®°å½•, window[idx]=1è¡¨ç¤ºå¯¹åº”åœºæ¬¡æœ‰å®Œæˆ
}

message ActivityObjectiveConditions {
    bool check_basic_condition1 = 1; // åŸºç¡€æ¡ä»¶p1~p4
    bool check_basic_condition2 = 2;
    bool check_basic_condition3 = 3;
    bool check_basic_condition4 = 4;
    bool check_basic_condition5 = 5; // åŸºç¡€æ¡ä»¶mapid 
    bool check_basic_condition6 = 6; // åŸºç¡€æ¡ä»¶ListParam

    map<uint64,bool> ext_conditions = 10; // æ‰©å±•æ¡ä»¶ConditionIDArray
}

// æ´»åŠ¨ä»»åŠ¡
message ActivityTaskInfo
{
    uint64   task_id                     = 1;  // ä»»åŠ¡ID
    int32    task_type                   = 2;  // ä»»åŠ¡ç±»å‹
    int32    state                        = 3;  // ä»»åŠ¡çŠ¶æ€  ActivityTaskState
    int64    accept_time                  = 4;  // æ¥å–æ—¶é—´
    int64    complete_time                = 5;  // å®Œæˆæ—¶é—´
    repeated int64 var                    = 6 [deprecated=true];  // ä»»åŠ¡å˜é‡
    repeated ActivityObjective objectives = 7;  // ä»»åŠ¡ç›®æ ‡
    repeated ActivityTaskInfo child      = 8 [deprecated=true];  // å­ä»»åŠ¡ï¼ˆè¿‡åº¦è®¾è®¡äº†ï¼‰

    ActivityAward award                  = 9 [deprecated=true]; // ä»»åŠ¡å®Œæˆå¥–åŠ± (1ä¸ªä»»åŠ¡çŸ¥ä¼šæœ‰1ä¸ªå¥–åŠ±)
    int64    start_time                  = 10; // ä»»åŠ¡å¼€å§‹æ—¶é—´ï¼ˆä¸åˆ°å°±å±•ç¤ºå€’è®¡æ—¶ï¼‰
    int64    end_time                    = 11; // ä»»åŠ¡å…³é—­æ—¶é—´ (ä¸æ˜¯åšå®Œæ—¶é—´ï¼‰

    bool     invalid                     = 20; // ç­–åˆ’ä¼šåˆ é™¤ä¸‹æ¶é…ç½®è¡¨ä¸­çš„ä»»åŠ¡

    repeated ActivityAward awards        = 21; // ä»»åŠ¡å®Œæˆå¥–åŠ± (1ä¸ªä»»åŠ¡ç°åœ¨ä¼šæœ‰å¤šä¸ª1ä¸ªå¥–åŠ±)

    uint64   jump_id                     = 22; // è·³è½¬id
    uint64   mode_tag                    = 23; // æ¨¡å¼å€¾å‘æ€§

    string  name = 30; // åå­—ä¿¡æ¯
    string  desc = 31; // æè¿°ä¿¡æ¯
}

// æ´»åŠ¨ç¬¬ä¸€ä¸ªç‰ˆæœ¬çš„è®¾è®¡å®ç°ï¼Œæ²¡æœ‰è€ƒè™‘æ¸…æ¥šå“ªäº›åº”è¯¥æ˜¯å­˜å‚¨å±æ€§ã€éå­˜å‚¨å±æ€§ï¼Œå¯¼è‡´åç»­ç­–åˆ’æ›´æ–°é…ç½®è¡¨æ—¶å‡ºç°å¾ˆå¤šé—®é¢˜
//
// Note: 
// 1 ç©å®¶DBä¸­ä½¿ç”¨çš„æ˜¯ DBActivityInfoï¼Œ
// 2 è¿™é‡Œçš„ActivityInfoå…¨éƒ¨æ˜¯ä¸ºäº†å®¢æˆ·ç«¯è¿™è¾¹çš„å±•ç¤ºï¼ŒCSåè®®è¿”å›ç»™å®¢æˆ·ç«¯çš„æ•°æ®ï¼Œä¼šæ˜¾ç¤ºé€šè¿‡ä¸€ä¸ªè½¬æ¢æ“ä½œï¼Œå°†å‰è€…è½¬æ¢ä¸ºåè€…
message ActivityInfo
{
    uint64     actv_id    = 1; // æ´»åŠ¨ID
    int32      actv_type  = 2; // æ´»åŠ¨ç±»å‹ ActivityType

    int64      start_date = 3; // å¼€å§‹æ—¥æœŸ(æ—¶é—´æˆ³)
    int64      end_date   = 4; // ç»“æŸæ—¥æœŸ

    bool       is_tracking = 5; // è·Ÿè¸ªä¸­ (see also: manual_tracking)

    // å®¢æˆ·ç«¯luaä»£ç ä¸æ”¯æŒoneofï¼Œæ‰€ä»¥è¿™é‡Œæ¯ç§æ´»åŠ¨ç±»å‹ä¸“å±ä¿¡æ¯å®šä¹‰ä¸ä½¿ç”¨oneof

    // 1. ç­¾åˆ°ç±»(æ™®é€šç­¾åˆ°30+æ–°å…µæŠ¥åˆ°42)æ´»åŠ¨çš„ä¸“å±ä¿¡æ¯
    AttendInfo attend_info = 6; // ç­¾åˆ°ç±»æ´»åŠ¨çš„ä¿¡æ¯

    // 2. ä»»åŠ¡ç±»æ´»åŠ¨
    repeated   ActivityTaskInfo task_info           = 7;  // ä»»åŠ¡ä¿¡æ¯
    repeated   ActivityTaskInfo expired_task_info   = 99; // è¢«ä¸‹æ‰çš„ä»»åŠ¡ä¿¡æ¯

    // 3. å…¬å‘Šç±»æ´»åŠ¨
    string     content = 8; // å…¬å‘Šå†…å®¹

    // x. æ´»åŠ¨è´§å¸ï¼Œç”¨ä»¥å…‘æ¢ç‰©å“ã€å…‘æ¢é‡Œç¨‹ç¢‘å¥–åŠ±
    // éå­˜å‚¨å±æ€§ï¼Œè¿”å›ç»™å®¢æˆ·ç«¯æ—¶å¡«å……è¿™ä¸¤ä¸ªå­—æ®µ
    uint64 currency_id  = 9;  // è´§å¸id, see: Activity.csvè¡¨Currencyå­—æ®µ
    uint64 currency_num = 10; // è´§å¸æ•°é‡ï¼Œsee: DBPlayerActivity.currencies
    // x. æ”¾ç½®åœ¨æ ‡ç­¾å±•ç¤ºã€å±•ç¤ºé¡ºåº
    int32  tab_belonging   = 11; // å½’å±åˆ°é‚£ä¸ªé¡µç­¾
    bool   manual_tracking = 12; // éœ€è¦æ‰‹åŠ¨è·Ÿè¸ª
    int32  order_weight    = 13; // åœ¨é¡µç­¾ä¸­æ’åºæƒé‡

    // y. æ´»åŠ¨çš„å¥–åŠ±ï¼Œæœ‰çš„æ˜¯éå­˜å‚¨å±æ€§ï¼Œä»…ç”¨äºå®¢æˆ·ç«¯å±•ç¤º
    repeated ActivityMilestoneAward milestone_award = 14; // é‡Œç¨‹ç¢‘å¥–åŠ±åˆ—è¡¨ (å­˜å‚¨ï¼Œè™½ç„¶å¯ä»¥é€šè¿‡æ´»åŠ¨è´§å¸å¯ä»¥ç®—å‡ºæ¥stageï¼Œä½†æ˜¯è¦é¿å…é‡å¤å‘å¥–åŠ±ï¼‰
    repeated ActivityExchangeProp   exchange_item   = 16; // å¯å…‘æ¢ç‰©å“è¡¨ (å­˜å‚¨ï¼Œéœ€è¦è®°å½•å…‘æ¢æ¬¡æ•°ï¼‰

    // æœ€ç»ˆå¥–åŠ±
    repeated ActivityAward          final_award     = 15; // æœ€ç»ˆå¥–åŠ±è¡¨ (ä¸å­˜å‚¨ï¼Œä»…å±•ç¤ºï¼‰
    bool final_award_received                       = 20; // æœ€ç»ˆå¥–åŠ±å·²é¢†å–ï¼ˆå­˜å‚¨ï¼Œéœ€è¦è®°å½•æœ€ç»ˆé¢†å¥–çŠ¶æ€ï¼‰

    // 5. æ–°å…µé‡Œç¨‹ç¢‘æ¯æ¬¡ä»…æ˜¾ç¤º3ä¸ª    
    repeated ActivityTaskInfo recruit_ms_tasks = 30; // æ–°å…µé‡Œç¨‹ç¢‘å½“å‰å±•ç¤ºçš„ä»»åŠ¡åˆ—è¡¨

    // æ´»åŠ¨ä¸‹ä»»åŠ¡çš„ä¸‹æ¬¡åˆ·æ–°æ—¶é—´ (unix seconds)
    int64 next_refresh_time = 31;  // æ™®é€šé‡Œç¨‹ç¢‘ã€å…‘æ¢ã€æ¯æ—¥ä»»åŠ¡éœ€è¦è®¾ç½® (TODO è²Œä¼¼ä¹Ÿä¸åº”è¯¥å­˜å‚¨)

    // éå­˜å‚¨å±æ€§ï¼Œå¯¹é½csvé…ç½®æè¿°
    int32 mode_leaning = 32; // æ¨¡å¼å€¾å‘æ€§
    int32 mode_tag     = 33; // æ¨¡å¼æ ‡ç­¾

    uint32 card_display = 34; // å¡ç‰‡æ˜¾ç¤ºä¿¡æ¯
    string info1        = 35;
    string info2        = 36;
    string name         = 37;
    string desc         = 38; // æè¿°ä¿¡æ¯
    string details      = 39; // è¯¦ç»†æè¿°ä¿¡æ¯
    uint64 reward_showed1 = 40;
    uint64 reward_showed2 = 41;
    uint64 reward_showed3 = 42;

    bool invalid       = 100; // å› ä¸ºæŸäº›åŸå› è¯¥æ´»åŠ¨è¢«æ ‡è®°ä¸ºæ— æ•ˆï¼Œå¦‚ç­–åˆ’åˆ é™¤äº†ä¸‹é¢æ‰€æœ‰çš„tasks
}

message CSActivityGetReq
{
}

message CSActivityGetRes
{
    int32    result                  = 1;
    repeated ActivityInfo actv_infos = 2; // æ´»åŠ¨æ•°æ®
    int32    max_tracking_num        = 3; // æœ€å¤§è·Ÿè¸ªæ•°é‡
}

// æºå¸¦ä¸å‰å°äº¤äº’æ—¶çš„ä¸€äº›å­—æ®µ
//
// TODOï¼šè¿™ä¸ªåè®®å®šä¹‰ä¼¼ä¹æœ‰ç‚¹å†—ä½™ï¼Œå·²ç»æœ‰ActivityTaskInfoäº†ï¼Œèƒ½ç†è§£å…¶æƒ³åªè¿”å›æœ€å°‘æ•°æ®çš„éœ€æ±‚ï¼Œ
//       ä½†æ˜¯è¿™ä¸ªåè®®ä¹Ÿæ²¡æœ‰èµ·åˆ°åº”è¯¥å‘æŒ¥çš„ä½œç”¨ï¼Œæœ€åï¼Œç©å®¶å®¢æˆ·ç«¯éœ€è¦çš„å¥–åŠ±å±•ç¤ºã€ä»»åŠ¡è¿›åº¦éƒ½å°‘ä¸äº†
//
// æˆªæ­¢åˆ°ms24ï¼Œå‰åå°è¿™ä¸ªå­—æ®µä½¿ç”¨çš„æŒºå¤šçš„ï¼Œæš‚æ—¶å…ˆä¿ç•™ï¼Œæ‹©æœºå†è€ƒè™‘å¤„ç†
message CSActivityTask
{
    uint64 actv_id  = 1;  // æ´»åŠ¨ID
    uint64 task_id = 2;  // ä»»åŠ¡ID
    int32  state    = 3;  // ä»»åŠ¡çŠ¶æ€  ActivityTaskState
    repeated ActivityObjective objectives = 4;
}

// æ¥å—ä»»åŠ¡
message CSActivityTaskAcceptReq
{
    uint64 actv_id  = 1;  // æ´»åŠ¨ID
    uint64 task_id = 2;  // ä»»åŠ¡ID
}

message CSActivityTaskAcceptRes
{
    int32           result = 1;
    CSActivityTask task  = 2;
}


// é¢†å–ä»»åŠ¡å¥–åŠ±
message CSActivityTaskReceiveAwardReq
{
    repeated CSActivityTask tasks = 1;  // ä»»åŠ¡
}

message CSActivityTaskReceiveAwardRes
{
    int32      result                 = 1;
    repeated  CSActivityTask tasks = 2;
    repeated  ActivityInfo  actv_infos = 4; // æ­¤æ¬¡å˜æ›´æ´»åŠ¨
    DataChange data_change            = 3;
}

// ç­¾åˆ°
message CSActivityAttendReq
{
    // Deprecated: è°ƒç”¨æ–¹è°ƒç”¨æ—¶ä¸€æ¬¡åªèƒ½ç­¾åˆ°1ä¸ªæ´»åŠ¨ï¼Œç”¨repeatedå±äºæ¥å£è¿‡åº¦è®¾è®¡, use activity_id instead.
    repeated uint64 actv_id  = 1 [deprecated=true];  // æ´»åŠ¨ID

    uint64 activity_id = 2; // æ´»åŠ¨ID
}

message CSActivityAttendRes
{
    int32 result = 1;

    // Deprecated: use activity_info instead.
    repeated ActivityInfo actv_infos = 2 [deprecated=true]; // æ­¤æ¬¡å˜æ›´çš„ç­¾åˆ°æ´»åŠ¨

    DataChange     data_change    = 3;  // sol data change
    CSMPDataChange mp_data_change = 4;  // mp data change

    ActivityInfo activity_info = 5; 
}

// é¢†å–ç­¾åˆ°å¥–åŠ±
message CSActivityRecvAttendAwardReq {
    uint64 activity_id = 1; // ç­¾åˆ°æ´»åŠ¨id
    uint32 day_number      = 2; // é¢†å–å“ªä¸€å¤©çš„ç­¾åˆ°å¥–åŠ±ï¼Œsee: ActivityAttendDaysä¸­çš„DayNumber
}

message CSActivityRecvAttendAwardRes {
    int32 result = 1;

    DataChange     data_change    = 2;  // sol data change
    CSMPDataChange mp_data_change = 3;  // mp data change

    ActivityInfo activity_info = 4;
}

// è¿½è¸ª
message CSActivityTrackReq {
    repeated uint64 actv_id  = 1;  // æ´»åŠ¨ID
}

message CSActivityTrackRes {
    int32 result = 1;
    repeated ActivityInfo actv_infos = 2; // æ­¤æ¬¡å˜æ›´æ´»åŠ¨
    int32 max_tracing_num = 3;
}

// å–æ¶ˆè¿½è¸ª
message CSActivityUntrackReq {
    repeated uint64 actv_id  = 1;  // æ´»åŠ¨ID
}

message CSActivityUntrackRes {
    int32 result = 1;
    repeated ActivityInfo actv_infos = 2; // æ­¤æ¬¡å˜æ›´æ´»åŠ¨
}


// å…‘æ¢æŒ‡ä»¤
message CSActivityExchange
{
    uint64 actv_id = 1;
    repeated uint64 exchange_id =2; // å¯å…‘æ¢å¥–åŠ±çš„ID

    uint64 currency_id = 3 [deprecated=true]; // è´§å¸ï¼ˆåºŸå¼ƒï¼‰
    int64 currency_num = 4 [deprecated=true]; // è´§å¸æ•°é‡ï¼ˆåºŸå¼ƒï¼‰
}
// å…‘æ¢
message CSActivityExchangeReq
{
    // WARN: è°ƒç”¨æ–¹è°ƒç”¨æ—¶ä¸€æ¬¡åªèƒ½ç­¾åˆ°1ä¸ªæ´»åŠ¨ï¼Œç”¨repeatedå±äºæ¥å£è¿‡åº¦è®¾è®¡
    repeated CSActivityExchange exchanges  = 1;  // äº¤äº’æŒ‡ä»¤
}

message CSActivityExchangeRes
{
    int32 result = 1;

    repeated ActivityInfo actv_infos = 2; // æ­¤æ¬¡å˜æ›´æ´»åŠ¨
    DataChange     data_change    = 3;  // sol data change
    CSMPDataChange mp_data_change = 4;  // mp data change
}

// é‡Œç¨‹ç¢‘ä¿¡æ¯
message CSActivityMilestone
{
    option deprecated = true;
    uint64 actv_id = 1;
    repeated int32 stages = 2; // é¢†å“ªäº›é˜¶æ®µï¼Œéœ€è¦æ‰‹åŠ¨æŒ‡å®šé˜¶æ®µ (1-based)
}

// é¢†å–é‡Œç¨‹ç¢‘å¥–åŠ±
message CSActivityReceiveMilestoneAwardReq
{
    repeated CSActivityMilestone actvs = 1 [deprecated=true];  // ä»»åŠ¡é‡Œç¨‹ç¢‘

    uint64 actv_id = 2;
    repeated int32 stages = 3; // é¢†å“ªäº›é˜¶æ®µï¼Œéœ€è¦æ‰‹åŠ¨æŒ‡å®šé˜¶æ®µ (1-based)
}

message CSActivityReceiveMilestoneAwardRes
{
    int32      result                 = 1;
    repeated ActivityInfo actv_infos  = 2; // æ­¤æ¬¡å˜æ›´æ´»åŠ¨
    DataChange data_change            = 3;
}

// é¢†å–æœ€ç»ˆå¥–åŠ±
message CSActivityReceiveFinalAwardReq
{
    repeated uint64 actv_ids = 1;  // æ´»åŠ¨IDåˆ—è¡¨
}

message CSActivityReceiveFinalAwardRes
{
    int32      result                 = 1;
    repeated ActivityInfo actv_infos  = 2; // æ­¤æ¬¡å˜æ›´æ´»åŠ¨
    DataChange data_change            = 3;
}

// é€šçŸ¥å®¢æˆ·ç«¯æ´»åŠ¨ä»»åŠ¡çŠ¶æ€å˜åŒ–
message CSActivityUpdateProgressNtf {
    repeated CSActivityTask data = 1;
}

////////////////////////////////////////////////////////////////////////////

// æ´»åŠ¨é¦–é¡µé…ç½®è¯·æ±‚
message CSActivityGetBannersReq {
    //int32 mode = 1;  // 0-ä¸é™åˆ¶ï¼Œ1-solï¼Œ2-mp
}

message CSActivityGetBannersRes {
    int32 result = 1;
    repeated Banner banners = 2;
}

message Banner {
    uint64 id = 1;
    string diy_string1 = 2;
    string diy_string2 = 3;

    uint64 appear_time = 4; // æ˜¾ç¤ºæ—¶é—´
    uint64 unlock_time = 5; // è§£é”æ—¶é—´ï¼Œæ„å‘³ç€å¯ä»¥ç‚¹å‡»è·³è½¬
    uint64 disappear_time = 6; // æ¶ˆå¤±æ—¶é—´

    uint32 position = 7; // æ§åˆ¶å±•ç¤ºåŒºåŸŸ
    int32 weight = 8; // å±•ç¤ºä¼˜å…ˆæƒé‡
    int32 mode_tag = 9; // æ­¤bannerå·¦ä¸Šè§’æ˜¾ç¤ºä»€ä¹ˆæ¨¡å¼
    int32 mode_visibility = 10 [deprecated=true]; // æ¨¡å¼å¯è§æ€§ï¼Œå·²åºŸå¼ƒï¼Œå„æ¨¡å¼çœ‹åˆ°çš„ä»¥åæ˜¯ä¸€æ ·çš„

    bool is_new = 20 [deprecated=true]; // å®¢æˆ·ç«¯å…ˆæœ¬åœ°è®°å½•ä¸‹ï¼Œæ›å…‰åå°±ä¸å±•ç¤ºäº†
    bool is_hot = 21; // æ˜¯å¦çƒ­ç‚¹

    uint64 jump_id = 22; // è·³è½¬id
    string pic_resource = 34; // å›¾ç‰‡é“¾æ¥

    bool is_subtitle_show_time = 40; // æ˜¯å¦åœ¨å‰¯æ ‡é¢˜æ˜¾ç¤ºæ´»åŠ¨æ—¶é—´
    uint64 connected_event = 41; // ç›®å‰åªå…³è”æ´»åŠ¨ID
    uint32 banner_type = 42; // bannerç±»å‹ï¼Œ1ï¼šå¸¸è§„bannerï¼Œ2ï¼šå¼ºå…³è”banner
}
